
<%# ======= sort ingredients/instructions by sequence ======= %>
<% ingredients_sorted = @recipe.ingredients.sort_by { |ingredient| ingredient["sequence"] } %>
<% puts "ingredients_sorted: #{ingredients_sorted}" %>
<% instructions_sorted = @recipe.instructions.sort_by { |instruction| instruction["sequence"] } %>
<% puts "instructions_sorted: #{instructions_sorted}" %>


<%# ======= recipe data => javascript ======= %>
<%= content_tag :div, id: "prevValue", data: {ratingid: @recipe.rating_id, categoryid: @recipe.category_id, nationalityid: @recipe.nationality_id } do %>
<% end %>


<%# ======= recipe data => javascript ======= %>
<%= content_tag :div, id: "recipeId", data: {recipeid: @recipe.id} do %>
<% end %>
<%= content_tag :div, id: "titleData", data: {title: @recipe.title} do %>
<% end %>
<%= content_tag :div, id: "ratingData", data: {ratingid: @recipe.rating_id} do %>
<% end %>
<%= content_tag :div, id: "categoryData", data: {categoryid: @recipe.category_id} do %>
<% end %>
<%= content_tag :div, id: "nationalityData", data: {nationalityid: @recipe.nationality_id} do %>
<% end %>
<%= content_tag :div, id: "ingredientsData", data: {ingredients: ingredients_sorted} do %>
<% end %>
<%= content_tag :div, id: "instructionsData", data: {instructions: instructions_sorted} do %>
<% end %>


<h2 id="outputTitle"><%= @recipe.title %></h2>
<div id="editSaveBox">
	<%= select_tag "rating_edit_select", options_for_select(@rating_ids, @rating), class: "editSelect", remote: true %>
	<%= select_tag "category_edit_select", options_for_select(@category_ids, @category), class: "editSelect", remote: true %>
	<%= select_tag "nationality_edit_select", options_for_select(@nationality_ids, @nationality), class: "editSelect", remote: true %>
	<%= link_to "Save Changes", save_recipe_edits_path, id: "saveRecipeEdits", class: "addEditDelete", remote: true %>
	<%= link_to "Cancel Changes", "cancelRecipeEdits", id: "cancelRecipeEdits", class: "addEditDelete", remote: true %>
	<%= link_to "Delete Recipe", "delete_recipe/" + @recipe[:id].to_s, id: "deleteRecipe", class: "addEditDelete", remote: true %>
</div>


<div id="output">

	<p class="recipeLabel">ingredients</p>
	<div id="ingredients" class="list-group">
		<% ingredients_sorted.each_with_index do |next_ingredient, index| %>
			<div class="recipeLine" id="ingrLine_<%= next_ingredient.id %>">
				<input type="text" id="ingrSeq_<%= next_ingredient.id %>" class="sequence" name="seq" value="<%= next_ingredient.sequence %>">
				<p class="ingredient" id="ingredient_<%= next_ingredient.id %>"><%= next_ingredient.ingredient %></p>
			</div>
		<% end %>
	</div>

	<p class="recipeLabel">instructions</p>
	<div id="instructions" class="list-group">
		<% instructions_sorted.each_with_index do |next_instruction, index| %>
			<div class="recipeLine" id="instLine_<%= next_instruction.id %>">
				<input type="text" id="instSeq_<%= next_instruction.id %>" class="sequence" name="seq" value="<%= next_instruction.sequence %>">
				<p class="instruction" id="instruction_<%= next_instruction.id %>"><%= next_instruction.instruction %></p>
			</div>
		<% end %>
	</div>

</div>
