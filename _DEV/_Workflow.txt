

// ======= ======= ======= Workflow ======= ======= =======
// ======= ======= ======= Workflow ======= ======= =======
// ======= ======= ======= Workflow ======= ======= =======


// ======= ======= ======= add data ======= ======= =======
INSERT INTO table_name(column1, column2, …) VALUES (value1, value2, …);
INSERT INTO categories (category, created_at, updated_at) VALUES ('meat', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
INSERT INTO categories (category, created_at, updated_at) VALUES ('seafood', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
INSERT INTO categories (category, created_at, updated_at) VALUES ('dessert', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
INSERT INTO categories (category, created_at, updated_at) VALUES ('soup/stew', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
INSERT INTO categories (category, created_at, updated_at) VALUES ('vegetarian', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);

Category.destroy_all
Category.create([
 { category:"meat" },
 { category:"seafood" },
 { category:"dessert" },
 { category:"soup/stew" },
 { category:"vegetarian" }
])
@categories = Category.all
puts "@categories: #{@categories.inspect}"
puts "Category.column_names: #{Category.column_names.inspect}"


// ======= ======= ======= database re-design ======= ======= =======
// == modify existing ==
ALTER TABLE categories RENAME COLUMN recipe_type TO category;
ALTER TABLE recipes RENAME COLUMN recipe_nation;
ALTER TABLE recipes RENAME COLUMN column_name TO new_column_name;


rails g model Nationality nationality:string
rails g migration AddRatingToRecipe rating:integer
rails g migration AddCategoryToRecipe category:references
rails g migration AddNationalityToRecipe nationality:references
rails g migration DropTypeFromRecipe recipe_type:string

// == rebuild from scratch ==
rails g model Category category:string
rails g model Nationality nationality:string
rails g model Recipe title:string category:references nationality:references
rails g model Ingredient recipe:references ingredient:string
rails g model Instruction recipe:references instruction:string


// ======= ======= ======= infinite loops ======= ======= =======
• terminal window
$ top			// show largest processes
$ kill 1739		// normal kill process (by process number e.g. 1739)
$ kill -9 1739	// force kill process
$ q				// return to normal command line

<%= form_with(model: category, local: true) do |form| %>


// ======= ======= ======= modify table ======= ======= =======
ALTER TABLE categories DROP COLUMN recipe_nation;
ALTER TABLE categories DROP COLUMN recipe_id;
rails g migration AddCategoryToRecipe category_id:integer
rails g migration AddNationalityToRecipe nationality_id:integer


// ======= ======= ======= recipe_type setup ======= ======= =======
rails g model Category recipe:references recipe_type:string recipe_nation:string
rails g scaffold_controller Category


// ======= ======= ======= sql/active record statements ======= ======= =======
• overview (where clause)
https://www.rubyguides.com/2019/07/rails-where-method/


// ======= ======= ======= psql: duplicate database ======= ======= =======
• copy database within the same server

	CREATE DATABASE recipes_dev WITH TEMPLATE rails_devise_javascript_dev;
	CREATE DATABASE recipes_test WITH TEMPLATE rails_devise_javascript_test;


// ======= ======= ======= psql: rename database ======= ======= =======
• Disconnect from the database that you want to rename and connect to a different database.
• Check and terminate all active connections to the database that you want to rename.
• Use the ALTER DATABASE statement to rename the database to the new one.

	ALTER DATABASE original_name RENAME TO new_name;
	ALTER DATABASE recipes RENAME TO recipes_dev;


// ======= ======= ======= Recipe table ======= ======= =======
rails generate model Recipe
	title:string
	type:string

rails generate model Recipe title:string type:string


// ======= ======= ======= Ingredient table ======= ======= =======
rails generate model Ingredient
	recipe:references
	ingredient:string

rails generate model Ingredient recipe:references ingredient:string


// ======= ======= ======= Instruction table ======= ======= =======
rails generate model Instruction
	recipe:references
	instruction:string

rails generate model Instruction recipe:references instruction:string














// ======= ======= ======= Workflow ======= ======= =======
